<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head></h:head> 

<body>
	<ui:composition template="/resources/plantilla/plantilla.xhtml">		
		<ui:define name="content">			
			#{controllerAudiencia.findAudiencias()}
			<div class='content-wrapper' style="height:10px;overflow:auto">
			<div class="content">
				<div class="row">
					<div class="col-md-12">
						<div class="nav-tabs-custom">
							<ul class="nav nav-tabs" style="border-color: blue">
								<li class="active"><a href="#todas" data-toggle="tab">Todas <span class="label label-#{controllerSolicitud.colorSolicitudEstado('REGISTRADA')}">#{controllerAudiencia.listaSolicitud.size()}</span></a>
								</li>
								<li><a href="#citacion" data-toggle="tab">Por citaci√≥n <span class="label label-#{controllerSolicitud.colorSolicitudEstado('AUDIENCIA-CITACION')}">#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-CITACION').size()}</span></a>
								</li>
								<li><a href="#pendientes" data-toggle="tab">Pendientes <span class="label label-#{controllerSolicitud.colorSolicitudEstado('AUDIENCIA-PENDIENTE')}">#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-PENDIENTE').size()}</span></a></li>
								<li><a href="#encurso" data-toggle="tab">En curso <span class="label label-#{controllerSolicitud.colorSolicitudEstado('AUDIENCIA-ENCURSO')}">#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-ENCURSO').size()}</span></a></li>
								<li><a href="#finalizadas" data-toggle="tab">Finalizadas <span class="label label-#{controllerSolicitud.colorSolicitudEstado('AUDIENCIA-FINALIZADA')}">#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-FINALIZADA').size()}</span></a></li>
								
							</ul>
							<div class="tab-content">

								<div class="tab-pane active" id="todas">
									<h:form id='formtodas'>
										<ui:param name="formulario" value="@form :formcitacion :formpendientes :formencurso :formfinalizadas :formBotones"/>
										
											<ui:include src="tablaaudiencia.xhtml">
												<ui:param name="listaAudiencia" value="#{controllerAudiencia.listaSolicitud}" />
											</ui:include>
										
									</h:form>
								</div>
								
								<div class="tab-pane" id="citacion">
									<h:form id="formcitacion">
										<ui:param name="formulario" value="@form :formtodas :formpendientes :formencurso :formfinalizadas :formBotones"/>
									
											<ui:include src="tablaaudiencia.xhtml">
												<ui:param name="listaAudiencia" value="#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-CITACION')}" />
											</ui:include>
										
									</h:form>
								</div>
								<div class="tab-pane" id="pendientes">
									<h:form id="formpendientes">
										<ui:param name="formulario" value="@form :formtodas :formcitacion :formencurso :formfinalizadas :formBotones"/>
										
											<ui:include src="tablaaudiencia.xhtml">
												<ui:param name="listaAudiencia" value="#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-PENDIENTE')}" />
											</ui:include>

									</h:form>
								</div>
								<div class="tab-pane" id="encurso">
									<h:form id="formencurso">
										<ui:param name="formulario" value="@form :formtodas :formpendientes :formcitacion :formfinalizadas :formBotones"/>
										
											<ui:include src="tablaaudiencia.xhtml">
												<ui:param name="listaAudiencia" value="#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-ENCURSO')}" />
											</ui:include>
										
									</h:form>
								</div>
								<div class="tab-pane" id="finalizadas">
									<h:form id="formfinalizadas">
										<ui:param name="formulario" value="@form :formtodas :formpendientes :formcitacion :formencurso :formBotones"/>
										
										<ui:include src="tablaaudiencia.xhtml">
											<ui:param name="listaAudiencia" value="#{controllerAudiencia.solicitudesPorEstado('AUDIENCIA-FINALIZADA')}" />
										</ui:include>
									</h:form>
								</div>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class='main-footer' style="height: 43.11111px;">
			<div class="text-center">
				<h:form id="formBotones">

					<h:commandButton value="Ficha" action="listaaudiencias" styleClass="btn btn-sm btn-primary btn-menu"/>
					
					<h:commandButton value="Detalle Audiencias" action="listaaudienciadetalletabla" actionListener="#{controllerSession.setIdSolicitudAudienciaDetalle(modelAudiencia.selectSolicitud.get(0).idSolicitud)}" disabled="#{modelAudiencia.selectSolicitud.size()==1? 'false': 'true'}" styleClass="btn btn-sm btn-primary btn-menu"/>
					
					<h:commandButton value="Enviar Citaciones" rendered="#{modelLogin.role=='conalbos'}" actionListener="#{sendMail.enviarCitacion(modelAudiencia.selectSolicitud)}" disabled="#{controllerAudiencia.bloquearBoton('AUDIENCIA-CITACION','')}" styleClass="btn btn-sm btn-#{controllerSolicitud.colorSolicitudEstado('AUDIENCIA-CITACION')} btn-menu"></h:commandButton>
					<h:commandButton value="Desarrollar Audiencia" rendered="#{modelLogin.role=='conciliador'}" actionListener="#{controllerSession.setIdSolicitudDesarrolloAudiencia(modelAudiencia.selectSolicitud.get(0).idSolicitud)}" action="desarrolloaudiencia?faces-redirect=true"  disabled="#{controllerDesarrolloAudiencia.bloquearBotonDesarrollarAudiencia(modelAudiencia.selectSolicitud)}" styleClass="btn btn-sm btn-#{controllerSolicitud.colorSolicitudEstado('AUDIENCIA-ENCURSO')} btn-menu"/>
					
					<h:commandButton value="Aplazar" rendered="#{modelLogin.role=='conalbos'}" actionListener="#{controllerAudiencia.aplazarAudiencia()}" styleClass="btn btn-sm btn-warning btn-menu" disabled="#{controllerAudiencia.bloquearBotonAplazar('AUDIENCIA-PENDIENTE','AUDIENCIA-CITACION')}" action="listaaudiencias?faces-redirect=true"/>
					
					<h:commandButton value="Expedir #{controllerAudiencia.nombreBotonActaConstancia()}" rendered="#{modelLogin.role=='conciliador'}" disabled="#{controllerAudiencia.bloquearBotonExpedir()}" styleClass="btn btn-sm btn-success btn-menu"></h:commandButton>

            		<h:commandButton value="Guardar  #{controllerAudiencia.nombreBotonActaConstancia()}" rendered="#{modelLogin.role=='conalbos'}" onclick="$('#modalsubiracta').modal();" disabled="#{controllerAudiencia.bloquearBotonSubir()}" class="btn btn-success btn-menu">
            			<f:ajax></f:ajax>
            		</h:commandButton>
            		
            		<h:commandButton id="download" rendered="#{modelLogin.role=='conalbos'}"  onclick="$('#modalcopia').modal();" disabled="#{controllerAudiencia.bloquearBotonExpedirCopia()}" value="Expedir Copia" styleClass="btn btn-success btn-menu">
            			<f:ajax></f:ajax>
            		</h:commandButton>
            		
            		<h:commandButton value="Devolucion" rendered="#{modelLogin.role=='conalbos'}" onclick="$('#modaldevolucion').modal();" disabled="#{controllerAudiencia.bloquearBotonDevolucion()}" class="btn btn-success btn-menu">
            			<f:ajax></f:ajax>
            		</h:commandButton>
            		
            		<ui:include src="modal/modalcopia.xhtml"></ui:include>
            		<ui:include src="modal/modalsubiracta.xhtml"></ui:include>
            		<ui:include src="modal/modaldevolucion.xhtml"></ui:include>
				</h:form>
			</div>
		</div>
		</ui:define>
	</ui:composition>
</body>
 
</html>
