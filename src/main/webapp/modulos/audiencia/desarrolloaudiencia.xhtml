<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>
	<ui:composition template="/resources/plantilla/plantilla.xhtml">
		<ui:define name="content">
      
			<ui:param name="solicitud" value="#{controllerAudiencia.findSolicitud(modelSolicitud.selectSolicitud.get(0))}" />
			
  			<h:form id="desarrolloForm">
				<div class='content-wrapper' style="height:10px;overflow:auto">
					<div class="content">
						<div class="row">
							<div class="col-lg-12">
				  				<h:panelGroup layout="block" class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">
									<div class="box-header with-border" style="padding-bottom:0px">
		                				<i>
			              					<h:outputLabel value="Asistencia" style="font-size:14pt; margin-left:1%"/>
		                  				</i>
		               				</div>
		               				<div class="box-body">
										<div class="col-lg-6">
											<div class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">
					
											    <div class="box-body no-padding">
											      	<table id="layout-skins-list" class="table table-striped table-hover">
										       	 		<thead>
											          		<tr>
											            		<th style="width: 80%;">Convocantes</th>
											            		<th class="text-center" style="width: 10%;">Asistencia</th>
											            		<th class="text-center" style="width: 10%;">Excusa</th>
											          		</tr>
											        	</thead>
											        	<tbody>
					
															<ui:repeat varStatus="n" var="convocante" value="#{solicitud.partes}">
																<h:panelGroup rendered="#{convocante.tipoParte=='Convocante'}">
																	
																 	<tr>
															            <td style="width: 80%;">
															            	<h:outputText value="#{convocante.apellidos} #{convocante.nombres}" />
														            	</td>
															            <td class="text-center" style="width: 10%;">
															            
															            <h:panelGrid class="btn btn-#{controllerAudiencia.changeColorButton(convocante.idParte)} btn-xs">
														            		<f:ajax listener="#{controllerAudiencia.addAsistencia(convocante.idParte)}" render="@this" event="click"></f:ajax>
														            		<i class="fa #{controllerAudiencia.changeIcon(convocante.idParte)}"></i>
														            	</h:panelGrid>
														            	
														            	</td>
														            	 <td class="text-center" style="width: 10%;">
															            	<h:panelGroup class="btn btn-success btn-xs"><i class="fa fa-edit"></i></h:panelGroup>
														            	</td>
														          	</tr>
													          	</h:panelGroup>
															</ui:repeat>
					
								        				</tbody>
								   					</table>
												</div>
								  			</div>
						  				</div>
						  				<div class="col-lg-6">
						  					<div class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">
					
											    <div class="box-body no-padding">
											      	<table id="layout-skins-list" class="table table-striped table-hover">
										       	 		<thead>
											          		<tr>
											            		<th style="width: 80%;">Convocados</th>
											            		<th class="text-center" style="width: 10%;">Asistencia</th>
											            		<th class="text-center" style="width: 10%;"> Excusa</th>
											          		</tr>
											        	</thead>
											        	<tbody>
					
															<ui:repeat varStatus="n" var="convocado" value="#{solicitud.partes}">
																<h:panelGroup rendered="#{convocado.tipoParte=='Convocado'}">
																
																 	<tr>
															            <td style="width: 80%;">
															            	<h:outputText value="#{convocado.apellidos} #{convocado.nombres}" />
														            	</td>
															            <td class="text-center" style="width: 10%;">
															            	<h:panelGrid class="btn btn-#{controllerAudiencia.changeColorButton(convocado.idParte)} btn-xs">
															            		<f:ajax listener="#{controllerAudiencia.addAsistencia(convocado.idParte)}" render="@this" event="click"></f:ajax>
															            		<i class="fa #{controllerAudiencia.changeIcon(convocado.idParte)}"></i>
															            	</h:panelGrid>
														            	</td>
														            	 <td class="text-center" style="width: 10%;">
															            	<h:panelGroup class="btn btn-success btn-xs"><i class="fa fa-edit"></i></h:panelGroup>
														            	</td>
														          	</tr>
													          	</h:panelGroup>
															</ui:repeat>
					
								        				</tbody>
								   					</table>
												</div>
								  			</div>
							  			</div>
						  			</div>
					  			</h:panelGroup>
				  			</div>
							<div class="col-lg-12">
					  			<h:panelGroup layout="block" id="desarrollo" class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">
									<div class="box-header with-border" style="padding-bottom:0px">
		                 				<i>
				              				<h:outputLabel value="Desarrollo" style="font-size:14pt; margin-left:1%"/>
		                   				</i>
		                   				<div class="pull-right">
			                   				<h:outputLabel value="Acuerdo Parcial" style="margin-right:5px"/>
			                   				<h:commandButton value="Si" styleClass="btn btn-#{modelAudiencia.acuerdoParcial? 'success': 'danger'} btn-xs" style="width:26px">
			                   					<f:ajax render="desarrollo @this" listener="#{modelAudiencia.setAcuerdoParcial(true)}"></f:ajax>
			                 				</h:commandButton>
			                   				<h:commandButton  value="No" styleClass="btn btn-#{modelAudiencia.acuerdoParcial? 'danger': 'success'} btn-xs" style="width:26px">
			                   					<f:ajax render="desarrollo @this" listener="#{modelAudiencia.setAcuerdoParcial(false)}"></f:ajax>
			                 				</h:commandButton>
		                 				</div>
									</div>
									
									<h:panelGroup layout="block" rendered="#{!modelAudiencia.acuerdoParcial}" styleClass="box-body">
										
										<div class="col-lg-2">
											<h:outputLabel value=" " />
											<h:outputLabel value="Asunto:" />
											<p:selectOneRadio required="true" requiredMessage="Es " id="tipoResultado" value="#{modelAudiencia.tipoResultado}" layout="grid" columns="1">
												<f:selectItem itemLabel=" Acuerdo" itemValue="ACUERDO"/>
												<f:selectItem itemLabel=" No Acuerdo" itemValue="NOACUERDO"/>
												<f:selectItem itemLabel=" No Conciliable" itemValue="NOCONCILIABLE"/>
											</p:selectOneRadio>
										</div>
										<div class="form-group has-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} col-lg-10">
											<label class="control-label" for="inputSuccess"><i class="fa fa-commenting-o"></i> Observaci√≥n  </label>
											<h:inputTextarea requiredMessage="ff" required="true" id="observacion" value="#{modelAudiencia.observacion}" styleClass="form-control" style="resize:none" rows="6"/>
										</div>
									</h:panelGroup>
									
									<h:panelGroup layout="block" rendered="#{modelAudiencia.acuerdoParcial}" styleClass="box-body">
										<div class="form-group has-success col-lg-10 box-body">
											<label class="control-label" for="inputSuccess"><i class="fa fa-commenting-o"></i> Acuerdos  </label>
											<h:inputTextarea id="acuerdos" value="#{modelAudiencia.acuerdo}" styleClass="form-control" style="resize:none" rows="6"/>
										</div>
										
										<div class="form-group has-error col-lg-10 box-body">
											<label class="control-label" for="inputSuccess"><i class="fa fa-commenting-o"></i> Desacuerdos  </label>
											<h:inputTextarea id="noacuerdos" value="#{modelAudiencia.noAcuerd}" styleClass="form-control" style="resize:none" rows="6"/>
										</div>
										
									</h:panelGroup>	
								</h:panelGroup>
							</div>
						</div>
					</div>
				</div>
				<div class='main-footer' style="height: 43.11111px;">
					<div class="text-center">
						<h:commandButton value="Registrar Asistencia" styleClass="btn btn-success btn-menu" action="listaaudiencias?faces-redirect=true"/>
						<h:commandButton value="Guardar Cambios" styleClass="btn btn-success btn-menu" action="listaaudiencias?faces-redirect=true"/>
						<h:commandButton value="Finalizar" actionListener="#{controllerAudiencia.addResultado('FINALIZADA')}" action="listaaudiencias?faces-redirect=true" styleClass="btn btn-success btn-menu" >
						</h:commandButton>
						<h:commandButton  value="Suspender" actionListener="#{controllerAudiencia.suspenderAudiencia()}" immediate="true" styleClass="btn btn-primary btn-menu" action="listaaudiencias?faces-redirect=true"/>
					
						
					</div>
				</div>
			</h:form>
		</ui:define>
		
	</ui:composition>

</body>
</html>
