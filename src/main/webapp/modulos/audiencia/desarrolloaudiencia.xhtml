<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>
	<ui:composition template="/resources/plantilla/plantilla.xhtml">
		<ui:define name="content">
      
			<ui:param name="solicitud" value="#{controllerAudiencia.findSolicitud(modelSolicitud.selectSolicitud.get(0))}" />

			<div class="content">
				<div class="row">
					<div class="col-lg-6">
						<div class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">

						    <div class="box-body no-padding">
						      	<table id="layout-skins-list" class="table table-striped table-hover">
					       	 		<thead>
						          		<tr>
						            		<th>Convocantes</th>
						            		<th>Asistencia</th>
						            		<th>Excusa</th>
						          		</tr>
						        	</thead>
						        	<tbody>

										<ui:repeat varStatus="n" var="convotante" value="#{solicitud.partes}">
											<h:panelGroup rendered="#{convotante.tipoParte=='Convocante'}">
												
											 	<tr>
										            <td style="width: 80%;">
										            	<h:outputText value="#{convocado.apellidos} #{convotante.nombres}" />
									            	</td>
										            <td class="text-center" style="width: 80%;">
										            	<h:panelGroup class="btn btn-danger btn-xs"><i class="fa fa-close"></i></h:panelGroup>
									            	</td>
									            	 <td class="text-center" style="width: 80%;">
										            	<h:panelGroup class="btn btn-success btn-xs"><i class="fa fa-edit"></i></h:panelGroup>
									            	</td>
									          	</tr>
								          	</h:panelGroup>
										</ui:repeat>

			        				</tbody>
			   					</table>
							</div>
			  			</div>
	  				</div>
	  				<div class="col-lg-6">
	  					<div class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">

						    <div class="box-body no-padding">
						      	<table id="layout-skins-list" class="table table-striped table-hover">
					       	 		<thead>
						          		<tr>
						            		<th style="width: 210px;">Convocados</th>
						            		<th>Asistencia</th>
						            		<th>Excusa</th>
						          		</tr>
						        	</thead>
						        	<tbody>

										<ui:repeat varStatus="n" var="convocado" value="#{solicitud.partes}">
											<h:panelGroup rendered="#{convocado.tipoParte=='Convocado'}">
											
											 	<tr>
										            <td style="width: 80%;">
										            	<h:outputText value="#{convocado.apellidos} #{convocado.nombres}" />
									            	</td>
										            <td class="text-center" style="width: 10%;">
										            	<h:panelGroup class="btn btn-success btn-xs"><i class="fa fa-check"></i></h:panelGroup>
									            	</td>
									            	 <td class="text-center" style="width: 10%;">
										            	<h:panelGroup class="btn btn-success btn-xs"><i class="fa fa-edit"></i></h:panelGroup>
									            	</td>
									          	</tr>
								          	</h:panelGroup>
										</ui:repeat>

			        				</tbody>
			   					</table>
							</div>
			  			</div>
		  			</div>
		  			<h:form>
						<div class="col-lg-12">
				  			<h:panelGroup layout="block" class="box box-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} sombra">
								<div class="box-header with-border" style="padding-bottom:0px">
	                 				<i>
			              				<h:outputLabel value="Desarrollo" style="font-size:14pt; margin-left:1%"/>
	                   				</i>
	                   				<h:outputLabel value="Acuerdo Parcial" style="font-size:14pt; margin-left:1%"/>
	                   				<h:commandButton value="Si" styleClass="btn btn-success">
	                   					<f:ajax render="@form" listener="#{modelAudiencia.setAcuerdoParcial(true)}"></f:ajax>
	                 				</h:commandButton>
	                   				<h:commandButton  value="No" styleClass="btn btn-success">
	                   					<f:ajax render="@form" listener="#{modelAudiencia.setAcuerdoParcial(false)}"></f:ajax>
	                 				</h:commandButton>
								</div>
								
								<h:panelGroup layout="block" rendered="#{!modelAudiencia.acuerdoParcial}" styleClass="box-body">
									<div class="form-group has-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} col-lg-10">
										<label class="control-label" for="inputSuccess"><i class="fa fa-commenting-o"></i> Observación  </label>
										<h:inputTextarea id="observacion" value="#{modelAudiencia.observacion}" styleClass="form-control" rows="6"/>
									</div>
									<div class="col-lg-2">
										<h:outputLabel value="Asunto:" />
										<p:selectOneRadio id="asunto" value="#{modelAudiencia.tipoResultado}" layout="grid" columns="1">
											<f:selectItem itemLabel=" No Conciliable" itemValue="NOCONCILIABLE"/>
											<f:selectItem itemLabel=" Acuerdo" itemValue="ACUERDO"/>
											<f:selectItem itemLabel=" No Acuerdo" itemValue="NOACUERDO"/>
										</p:selectOneRadio>
									</div>
								</h:panelGroup>
								
								<h:panelGroup layout="block" rendered="#{modelAudiencia.acuerdoParcial}" styleClass="box-body">
									<div class="form-group has-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} col-lg-10">
										<label class="control-label" for="inputSuccess"><i class="fa fa-commenting-o"></i> Observación  </label>
										<h:inputTextarea id="acuerdos" value="#{modelAudiencia.acuerdo}" styleClass="form-control" rows="6"/>
									</div>
									
									<div class="col-lg-2">
										<h:outputLabel value="Asunto:" />
										<p:selectOneRadio id="asuntoAcuerdo" value="#{modelAudiencia.tipoResultado}" layout="grid" columns="1">
											<f:selectItem itemLabel=" No Conciliable" itemValue="NOCONCILIABLE"/>
											<f:selectItem itemLabel=" Acuerdo" itemValue="ACUERDO"/>
											<f:selectItem itemLabel=" No Acuerdo" itemValue="NOACUERDO"/>
										</p:selectOneRadio>
									</div>
									
									<div class="form-group has-#{controllerSolicitud.colorSolicitudEstado(solicitud.estado)} col-lg-10">
										<label class="control-label" for="inputSuccess"><i class="fa fa-commenting-o"></i> Observación  </label>
										<h:inputTextarea id="noacuerdos" value="#{modelAudiencia.noAcuerd}" styleClass="form-control" rows="6"/>
									</div>
									
									<div class="col-lg-2">
										<h:outputLabel value="Asunto:" />
										<p:selectOneRadio id="asuntoNoAcuerdo" value="#{modelAudiencia.tipoResultado}" layout="grid" columns="1">
											<f:selectItem itemLabel=" No Conciliable" itemValue="NOCONCILIABLE"/>
											<f:selectItem itemLabel=" Acuerdo" itemValue="ACUERDO"/>
											<f:selectItem itemLabel=" No Acuerdo" itemValue="NOACUERDO"/>
										</p:selectOneRadio>
									</div>
								</h:panelGroup>
							</h:panelGroup>
						</div>
					</h:form>
				</div>
			</div>
			
		</ui:define>
		
		<ui:define name="footer">
			<div class="text-center">
				<h:form id='formBotones'>
					<h:commandButton  value="Registrar Asistencia" styleClass="btn btn-success btn-menu" action="listaaudiencias?faces-redirect=true"/>
					<h:commandButton  value="Guardar Cambios" styleClass="btn btn-success btn-menu" action="listaaudiencias?faces-redirect=true"/>
					<h:commandButton  value="Finalizar" actionListener="#{controllerAudiencia.addResultado('FINALIZAR')}" styleClass="btn btn-success btn-menu" action="listaaudiencias?faces-redirect=true"/>
					<h:commandButton  value="Suspender" actionListener="#{controllerAudiencia.addResultado('SUSPENDER')}" styleClass="btn btn-primary btn-menu" action="listaaudiencias?faces-redirect=true"/>
					<h:commandButton  value="Aplazar" actionListener="#{controllerAudiencia.addResultado('APLAZAAR')}" styleClass="btn btn-warning btn-menu" action="listaaudiencias?faces-redirect=true"/>
				</h:form>
			</div>
		</ui:define>
		
	</ui:composition>

</body>
</html>
